<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../css/style.css">
    <title>Teeworlds Protocol</title>
</head>
<body>
    <div class="header">
        <a href="../index.html">
            <img src="../img/tee.svg" alt="tee">
        </a>
        <a href="../index.html">home</a>
        <a href="traffic.html">traffic</a>
        <a href="snap_items.html">snap_items</a>
        <a href="system_messages.html">system_messages</a>
        <a href="game_messages.html">game_messages</a>
        <hr>
    </div>
    <div class="content">
        <h2>Fundamentals</h2>
        <p>
            There are a few base concepts that you need to understand to fully grasp the whole network protocol from scratch.
        </p>
        <hr>
        <h3 id="huffman"><a href="#huffman">Huffman compression</a></h3>
        <p>
            Packets can be compressed using huffman compression.
            The teeworlds packet header is never compressed only its payload.
            The packet header sets the COMPRESSION flag if the payload is compressed.
            Usually the same packets are compressed. But technically every packet could be compressed or
            uncompressed.
            <br>
            <br>
            Huffman compression is an alorithm not specific to teeworlds. To understand its fundamentals you
            can simply checkout any non teeworlds related huffman documentation. Like this <a href="https://www.youtube.com/watch?v=iiGZ947Tcck">youtube video</a>.
            Huffman compression depends on a weight tree. So if you reimplement huffman your self
            make sure it uses the same weight tree as the official teeworlds server and client.
            The official teeworlds frequence table can be found
            <a href="https://github.com/teeworlds/teeworlds/blob/26d24ec061d44e6084b2d77a9b8a0a48e354eba6/src/engine/shared/huffman.cpp#L7-L20">
                here</a>.
            <br>
            But chances are you do not have to reimplement the huffman alorithm
            even if you want to build a server or client in a new programming language.
            There are community implemenations for
            <a href="https://github.com/edg-l/TeeAI/blob/18ae5eac39e82a882e751c01df2f3b1896e6ba4c/engine/huffman.py">
                python,
            </a>
            <a href="https://gitlab.com/swarfey/teeworlds-client/-/blob/b3ad21d2da60b5db8c22630cae7036f8ca582ea4/lib/huffman.ts">
                javascript,
            </a>
            <a href="https://github.com/ChillerDragon/huffman-tw">
                ruby
            </a>
            and
            <a href="https://github.com/edg-l/rustyman">
                rust
            </a>
            already.
        </p>
    </div> <!-- content -->
    <footer>
        <hr>
        <div class="footer">
            <!-- Icon-link to source code on GitHub -->
            <a class="github" href="https://github.com/ChillerDragon/teeworlds-protocol" target="_blank" rel="noopener" aria-label="Source code">
                <!-- icon: https://materialdesignicons.com/icon/github -->
                <svg viewBox="0 0 24 24" class="github">
                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                </svg>
            </a>
            <span>
                ChillerDragon - 2022
            </span>
        </div>
    </footer>
</body>
